# 海鑫KPL抽奖项目开发文档

## 项目信息

- **项目名称**: 海鑫KPL九宫格抽奖系统
- **创建日期**: 2025年10月27日
- **开发环境**: VSCode
- **项目路径**: D:\VScode\Haixin-KPL

## 项目结构

```
Haixin-KPL/
├── index.html          # 主页面
├── lottery.html        # 抽奖页面
├── submit.html         # 信息提交页面
├── css/
│   └── style.css       # 全局样式文件
├── js/
│   ├── lottery.js      # 抽奖逻辑
│   └── submit.js       # 表单提交逻辑
├── image/              # 页面使用的切图/位图资源（运行时使用）
│   └── decorations/    # PSD导出的装饰元素（可选，比如顶部条/角落光效）
├── design/
│   └── psd/            # 设计源文件（PSD等，不参与运行）
└── docs/
    ├── vscode.md       # 开发文档（本文件）
    └── ops.md          # 操作记录文档
```

## 功能说明

### 1. 主页面 (index.html)
- **功能**: 提供抽奖活动入口
- **组件**: 
  - 页面标题：海鑫KPL抽奖活动
  - 开始抽奖按钮：长方形按钮，点击跳转到抽奖页面
- **样式**: 渐变背景，居中布局，响应式设计

### 2. 抽奖页面 (lottery.html)
- **功能**: 九宫格抽奖交互
- **布局**: 3x3网格，按照 1-2-3 / 8-9-4 / 7-6-5 排列
  - 位置1: 一等奖
  - 位置2: 谢谢参与
  - 位置3: 二等奖
  - 位置4: 谢谢参与
  - 位置5: 谢谢参与
  - 位置6: 三等奖
  - 位置7: 谢谢参与
  - 位置8: 四等奖
  - 位置9: 开始抽奖按钮（中间格子）
- **抽奖逻辑**:
  - 点击中间按钮开始抽奖
  - 外圈格子顺时针高亮旋转
  - 至少旋转3圈后停止
  - 根据概率决定中奖结果
- **中奖概率**:
  - 一等奖: 5%
  - 二等奖: 10%
  - 三等奖: 15%
  - 四等奖: 20%
  - 谢谢参与: 50%

### 3. 信息提交页面 (submit.html)
- **功能**: 中奖后收集用户信息
- **表单字段**:
  - 姓名（必填）
  - 手机号（必填，11位数字验证）
  - 详细地址（必填，文本域）
  - 联系邮箱（必填，邮箱格式验证）
- **验证规则**:
  - 手机号：正则验证 `^1[3-9]\d{9}$`
  - 邮箱：标准邮箱格式验证
  - 所有字段必填
- **数据处理**:
  - 提交后保存到 localStorage
  - 清除 sessionStorage 中的中奖信息
  - 返回主页

## 技术栈

- **HTML5**: 页面结构
- **CSS3**: 样式和动画
  - Flexbox/Grid 布局
  - 渐变背景
  - 过渡动画
  - 响应式设计
- **原生JavaScript**: 交互逻辑
  - ES6 类语法
  - DOM 操作
  - 事件处理
  - 表单验证
  - Web Storage API (sessionStorage, localStorage)

## 核心功能实现

### 抽奖动画
```javascript
- 使用 setTimeout 实现动画循环
- 动态调整速度实现减速效果
- CSS 类切换实现高亮效果
- 按顺时针方向旋转数组 [0,1,2,3,4,5,6,7]
```

### 数据流转
```
1. 抽奖结果 → sessionStorage.prizeName
2. 跳转到提交页面
3. 读取 sessionStorage.prizeName 显示中奖信息
4. 表单提交 → localStorage.lotterySubmissions
5. 清除 sessionStorage → 返回首页
```

### 表单验证
```javascript
- HTML5 原生验证属性 (required, pattern, type)
- JavaScript 自定义验证逻辑
- 实时输入验证反馈
- 提交前完整性检查
```

## 样式特点

1. **现代化设计**
   - 渐变色背景
   - 圆角边框
   - 阴影效果
   - 平滑过渡动画

2. **响应式布局**
   - 移动端适配 (< 768px)
   - 小屏幕优化 (< 480px)
   - 自适应字体大小
   - 灵活的网格系统

3. **交互反馈**
   - 悬停效果
   - 点击反馈
   - 高亮动画
   - 表单焦点状态

## 开发规范

### 代码规范
- 使用 ES6+ 语法
- 类和函数采用驼峰命名
- 适当的代码注释
- 逻辑清晰，模块化设计

### 文件组织
- HTML/CSS/JS 分离
- 样式统一管理
- 脚本按功能模块划分
- 运行资源与设计源文件分离：
  - 页面运行使用的图片放在 `image/`
  - PSD 源文件放在 `design/psd/`（仅存档与协作，不会被页面直接引用）
  - 装饰位切图统一放在 `image/decorations/`，默认文件名示例：
    - 首页：`index-top.png`、`index-corner.png`、`index-bottom-sparkles.png`
    - 抽奖页：`lottery-frame.png`、`lottery-topbar.png`、`lottery-bottom-rules-bg.png`
    - 提交页：`submit-top.png`、`submit-bottom-sparkles.png`
  - 放入后页面会自动显示；若文件不存在则不显示，不影响布局

### 命名规范
- CSS 类名使用短横线连接 (kebab-case)
- JavaScript 变量使用驼峰命名 (camelCase)
- 常量使用大写下划线 (UPPER_CASE)

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 后续优化建议

1. **后端集成**
   - 连接真实数据库
   - API 接口开发
   - 数据持久化

2. **功能增强**
   - 添加音效
   - 更多动画效果
   - 抽奖次数限制
   - 中奖记录查询

3. **性能优化**
   - 图片资源优化
   - 代码压缩
   - 缓存策略

4. **安全性**
   - 防刷机制
   - 数据加密
   - XSS 防护

## 变更日志
### v1.2.0 - 2025年10月28日
- ➕ 为三页添加可选装饰位（HTML容器 + CSS定位），支持直接投放PSD导出的装饰切图
- 📁 新增目录 `image/decorations/` 用于集中管理装饰切图
### v1.1.1 - 2025年10月28日
- ➕ 新增 `design/psd/` 目录用于存放PSD源文件（与运行资源分离）
- 🖼️ 引入页面底图：`image/index-bg.jpg`、`image/lottery-bg.jpg`、`image/submit-bg.jpg`
- 🎨 使用线性渐变叠加底图以保证文字对比度

### v1.0.0 - 2025年10月27日
- ✅ 初始化项目结构
- ✅ 创建主页面 (index.html)
- ✅ 创建抽奖页面 (lottery.html)
- ✅ 创建信息提交页面 (submit.html)
- ✅ 实现全局样式 (style.css)
- ✅ 实现抽奖逻辑 (lottery.js)
  - 九宫格旋转动画
  - 概率控制系统
  - 中奖结果判断
- ✅ 实现表单验证 (submit.js)
  - 手机号验证
  - 邮箱验证
  - 数据本地存储
- ✅ 响应式设计适配
- ✅ 创建项目文档

## 测试说明

### 功能测试
1. 主页面跳转测试
2. 抽奖动画流畅性测试
3. 中奖概率统计测试
4. 表单验证测试
5. 数据存储测试
6. 页面跳转逻辑测试

### 兼容性测试
1. 不同浏览器测试
2. 不同屏幕尺寸测试
3. 移动端触摸测试

## 联系方式

如有问题或建议，请联系开发团队。

---

**文档版本**: v1.0.0  
**最后更新**: 2025年10月27日
